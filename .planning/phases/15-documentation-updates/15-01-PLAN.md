---
phase: 15-documentation-updates
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/SPOKEN_HANDOFF_ANALYSIS.md
  - .planning/PROJECT.md
autonomous: true

must_haves:
  truths:
    - "Reader understands why two separate weight schemes exist"
    - "Reader knows frequency weights measure spoken prevalence"
    - "Reader knows risk weights measure leak severity"
    - "PROJECT.md shows v2.2 as complete milestone"
    - "Key Decisions table explains dual-weighting choice"
  artifacts:
    - path: "docs/SPOKEN_HANDOFF_ANALYSIS.md"
      provides: "Dual-weighting methodology section"
      contains: "Dual-Weighting Methodology"
    - path: ".planning/PROJECT.md"
      provides: "v2.2 milestone status and decision record"
      contains: "Dual-weighting"
  key_links:
    - from: "docs/SPOKEN_HANDOFF_ANALYSIS.md"
      to: "app/config.py"
      via: "reference to weight definitions"
      pattern: "app/config\\.py"
---

<objective>
Document the dual-weighting evaluation system introduced in v2.2.

Purpose: Enable readers to understand WHY two separate weight schemes exist (frequency vs risk) and WHEN to use each metric for decision-making.

Output:
- SPOKEN_HANDOFF_ANALYSIS.md with new "Dual-Weighting Methodology" section
- PROJECT.md updated with v2.2 milestone completion and Key Decisions entry
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-documentation-updates/15-RESEARCH.md
@docs/SPOKEN_HANDOFF_ANALYSIS.md
@app/config.py (lines 305-344)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Dual-Weighting Methodology section to SPOKEN_HANDOFF_ANALYSIS.md</name>
  <files>docs/SPOKEN_HANDOFF_ANALYSIS.md</files>
  <action>
Add a new section after "Executive Summary" titled "## Dual-Weighting Methodology".

Section structure:
1. **Intro paragraph** (2-3 sentences): v2.2 introduced dual-weighting to capture two perspectives on PHI detection performance
2. **Frequency Weights: Operational Reality** subsection:
   - Purpose: How often each PHI type is spoken in I-PASS handoffs
   - Key examples with actual weights from app/config.py:
     - PERSON (5.0): Patient names spoken constantly
     - ROOM (4.0): Primary identification method
     - MEDICAL_RECORD_NUMBER (0.5): Almost never spoken (displayed on screen)
   - Reference to app/config.py lines 315-328
3. **Risk Weights: HIPAA Compliance** subsection:
   - Purpose: Severity if each PHI type leaks (how identifying)
   - Key examples with actual weights from app/config.py:
     - MEDICAL_RECORD_NUMBER (5.0): THE unique identifier
     - PERSON (5.0): Directly identifies patient
     - ROOM (2.0): Semi-identifying (hospital context only)
   - Reference to app/config.py lines 330-344
4. **Why Two Weight Schemes?** subsection:
   - Core insight: PHI that's rarely spoken can still be highly identifying if leaked
   - Example: MRN has frequency=0.5 but risk=5.0
   - Without dual-weighting, MRN detection failures would appear acceptable in frequency metrics
5. **Guidance** subsection (bullet list):
   - Unweighted recall: HIPAA compliance floor (all entities equal)
   - Frequency-weighted: Operational reality (what's actually spoken)
   - Risk-weighted: Critical vulnerabilities (severity if leaked)

Update the date at the top to reflect v2.2 update (2026-01-29).

Do NOT duplicate the weight tables already in "Methodology" section â€” reference them and add the conceptual explanation of dual-weighting.
  </action>
  <verify>
- Section exists with heading "## Dual-Weighting Methodology"
- References app/config.py for weight definitions
- Explains frequency vs risk purpose
- Includes MRN example showing divergence
- Guidance section explains when to use each metric
  </verify>
  <done>
DOCS-01: Dual-weighting rationale documented
DOCS-02: Frequency weight purpose explained (spoken prevalence)
DOCS-03: Risk weight purpose explained (leak severity)
  </done>
</task>

<task type="auto">
  <name>Task 2: Update PROJECT.md with v2.2 completion and Key Decisions entry</name>
  <files>.planning/PROJECT.md</files>
  <action>
Two updates to PROJECT.md:

1. **Key Decisions table** - Add new row:
   | Dual-weighting (frequency + risk) | Frequency measures spoken prevalence; risk measures leak severity; both needed for complete evaluation | Good |

2. **Current State section** - Update to reflect v2.2 completion:
   - Change "v2.2 Dual-Weight Recall Framework" from in-progress to shipped
   - Update "Last updated" date to 2026-01-29

3. **Validated requirements** - Move the v2.2 requirements from "Active" to "Validated":
   - Risk-weighted recall/precision/F2 methods
   - Three-metric report output
   - Float-based frequency weights
   - Risk weight configuration
   - Updated test suite for float weights
   - Documentation of dual-weighting rationale (this phase)

Do NOT change the structure or order of existing sections.
  </action>
  <verify>
- Key Decisions table has new dual-weighting row
- Current State section shows v2.2 shipped
- Active requirements moved to Validated section
- Last updated date is 2026-01-29
  </verify>
  <done>
DOCS-04: PROJECT.md updated with v2.2 milestone completion
DOCS-05: Key Decisions table includes dual-weighting decision
  </done>
</task>

</tasks>

<verification>
All 5 documentation requirements (DOCS-01 through DOCS-05) addressed:
- [ ] DOCS-01: SPOKEN_HANDOFF_ANALYSIS.md documents dual-weighting rationale
- [ ] DOCS-02: Frequency weight purpose explained (spoken prevalence)
- [ ] DOCS-03: Risk weight purpose explained (leak severity)
- [ ] DOCS-04: PROJECT.md updated with v2.2 completion
- [ ] DOCS-05: Key Decisions table updated with dual-weighting decision

Verification commands:
```bash
# Check SPOKEN_HANDOFF_ANALYSIS.md has dual-weighting section
grep -q "Dual-Weighting Methodology" docs/SPOKEN_HANDOFF_ANALYSIS.md && echo "DOCS-01 PASS"

# Check frequency and risk explanations
grep -q "Frequency Weights" docs/SPOKEN_HANDOFF_ANALYSIS.md && echo "DOCS-02 PASS"
grep -q "Risk Weights" docs/SPOKEN_HANDOFF_ANALYSIS.md && echo "DOCS-03 PASS"

# Check PROJECT.md updates
grep -q "v2.2.*shipped\|shipped.*v2.2" .planning/PROJECT.md && echo "DOCS-04 PASS"
grep -q "Dual-weighting" .planning/PROJECT.md && echo "DOCS-05 PASS"
```
</verification>

<success_criteria>
1. SPOKEN_HANDOFF_ANALYSIS.md has new "Dual-Weighting Methodology" section explaining:
   - Why two weight schemes exist
   - What frequency weights measure (spoken prevalence)
   - What risk weights measure (leak severity)
   - When to use each metric
2. PROJECT.md updated:
   - v2.2 milestone shown as complete
   - Key Decisions table has dual-weighting entry
   - v2.2 requirements moved to Validated section
</success_criteria>

<output>
After completion, create `.planning/phases/15-documentation-updates/15-01-SUMMARY.md`
</output>

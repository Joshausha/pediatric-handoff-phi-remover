---
phase: 10-test-script-generation
plan: 02
type: execute
wave: 2
depends_on: [10-01]
files_modified:
  - tests/test_scripts/recordings/
  - .planning/phases/10-test-script-generation/FALSE_POSITIVE_LOG.md
autonomous: false

must_haves:
  truths:
    - "User has recorded audio for all 10 test scripts"
    - "User has processed all recordings through PHI detection pipeline"
    - "All false positives are documented with specific phrases and entity types"
  artifacts:
    - path: "tests/test_scripts/recordings/"
      provides: "Audio recordings of test scripts"
      contains: "10 audio files (.m4a or similar)"
    - path: ".planning/phases/10-test-script-generation/FALSE_POSITIVE_LOG.md"
      provides: "Completed false positive documentation"
      contains: "Filled-in entries for each script"
  key_links:
    - from: "tests/test_scripts/recordings/"
      to: "/transcribe endpoint"
      via: "HTTP POST upload"
      pattern: "localhost:8000/transcribe"
---

<objective>
Record all 10 test scripts and process them through the PHI detection pipeline, documenting all false positives discovered.

Purpose: Generate ground-truth data showing which phrases trigger over-detection, informing Phase 11 deny list expansion.

Output: Audio recordings processed through pipeline, with all false positives documented in FALSE_POSITIVE_LOG.md.
</objective>

<execution_context>
@/Users/joshpankin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/joshpankin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-test-script-generation/10-RESEARCH.md
@.planning/phases/10-test-script-generation/10-01-SUMMARY.md
@tests/test_scripts/README.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Record all 10 test scripts</name>
  <action>
    USER ACTION REQUIRED: Record audio of all 10 test scripts.

    **Recording instructions:**
    1. Find a quiet room
    2. Use Voice Memos (iOS) or any voice recording app
    3. For each script in tests/test_scripts/:
       - Read the script conversationally (not formally)
       - Include natural hesitations ("um", "uh") if they come naturally
       - Each recording should be ~60-90 seconds
       - Save with matching filename (e.g., r1_rsv_bronchiolitis.m4a)
    4. Move all recordings to tests/test_scripts/recordings/

    **Order suggestion:**
    - Record realistic scripts first (R1-R6) to warm up
    - Then record edge-case scripts (E1-E4) which need more deliberate pacing

    **Quality check:**
    - Play back at least one recording to verify clarity
    - Re-record if too fast or unclear
  </action>
  <verify>
    ls tests/test_scripts/recordings/
    # Should show 10 audio files
  </verify>
  <done>
    10 audio recordings exist in tests/test_scripts/recordings/
  </done>
  <resume-signal>Type "recordings complete" when all 10 scripts are recorded</resume-signal>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Process recordings and document false positives</name>
  <action>
    USER ACTION REQUIRED: Process each recording through the PHI detection pipeline and document findings.

    **Setup:**
    ```bash
    # Start the server (from project root)
    uvicorn app.main:app --reload

    # Server will be at http://localhost:8000
    ```

    **For each recording:**
    1. Open http://localhost:8000 in browser
    2. Upload the audio file (or drag-drop)
    3. Wait for transcription and de-identification
    4. Review the output for FALSE POSITIVES (things incorrectly redacted):
       - Duration phrases like "three days" showing as [DATE_TIME]
       - Flow terms like "on high" showing as [LOCATION]
       - Any other unexpected redactions
    5. Document each false positive in FALSE_POSITIVE_LOG.md:
       - Script name
       - Original phrase
       - What it was detected as
       - Why it's a false positive

    **IMPORTANT:** If you modify app/config.py deny lists during testing, restart uvicorn (Ctrl+C, then re-run) due to @lru_cache config caching.

    **Expected findings (from research):**
    - Edge-case scripts (E1-E4) should expose duration phrase and flow term issues
    - Realistic scripts (R1-R6) may have fewer issues but will validate baseline
  </action>
  <verify>
    cat .planning/phases/10-test-script-generation/FALSE_POSITIVE_LOG.md | grep -c "Phrase:"
    # Should show number of documented false positives (expect 5-15)
  </verify>
  <done>
    All 10 recordings processed, all false positives documented in FALSE_POSITIVE_LOG.md with specific phrases and entity types
  </done>
  <resume-signal>Type "processing complete" when all recordings are processed and findings documented</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Summarize findings for Phase 11</name>
  <files>.planning/phases/10-test-script-generation/FALSE_POSITIVE_LOG.md</files>
  <action>
    After user completes documentation, analyze FALSE_POSITIVE_LOG.md and add a summary section:

    1. Count total false positives by entity type (DATE_TIME, LOCATION, etc.)
    2. Identify most common false positive patterns
    3. List specific deny list additions needed for Phase 11:
       - Duration words for DATE_TIME deny list
       - Flow terms for LOCATION deny list
    4. Note any unexpected findings

    This summary feeds directly into Phase 11 planning.
  </action>
  <verify>
    grep -A 20 "## Summary" .planning/phases/10-test-script-generation/FALSE_POSITIVE_LOG.md
    # Should show filled-in summary with counts and recommendations
  </verify>
  <done>
    FALSE_POSITIVE_LOG.md has summary section with counts, patterns, and Phase 11 recommendations
  </done>
</task>

</tasks>

<verification>
```bash
# Verify recordings exist
ls tests/test_scripts/recordings/ | wc -l
# Should be 10

# Verify false positives documented
grep "Phrase:" .planning/phases/10-test-script-generation/FALSE_POSITIVE_LOG.md | wc -l
# Should be > 0

# Verify summary exists
grep "## Summary" .planning/phases/10-test-script-generation/FALSE_POSITIVE_LOG.md
```
</verification>

<success_criteria>
- [ ] 10 audio recordings in tests/test_scripts/recordings/
- [ ] All recordings processed through PHI detection pipeline
- [ ] All false positives documented with specific phrases
- [ ] Summary section added with counts and Phase 11 recommendations
- [ ] Requirements TEST-03, TEST-04, TEST-05 satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/10-test-script-generation/10-02-SUMMARY.md`
</output>

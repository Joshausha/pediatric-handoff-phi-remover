# Milestone v2.1: Over-Detection Quality Pass

**Status:** SHIPPED 2026-01-28
**Phases:** 10-12
**Total Plans:** 7

## Overview

Systematic test-driven false positive elimination. Generated realistic and edge-case handoff test scripts, recorded and processed to discover over-detection issues, expanded deny lists with 70+ duration patterns and flow terminology, and validated no regressions on recall.

## Phases

### Phase 10: Test Script Generation and Recording

**Goal**: Realistic and edge-case handoff test data created and processed
**Depends on**: Phase 9 (CI/CD working)
**Plans**: 2 plans

Plans:
- [x] 10-01: Prepare test scripts and documentation infrastructure
- [x] 10-02: Record, process, and document false positives

**Details:**
- Created 6 realistic I-PASS handoff scripts covering RSV, pneumonia, asthma, gastroenteritis, febrile infant, croup
- Created 4 edge-case scripts stress-testing duration phrases and flow terminology
- Documented 45 false positives across 4 categories (DATE_TIME 58%, LOCATION 33%, PERSON 9%)
- Established systematic false positive documentation workflow

### Phase 11: Deny List Expansion and Unit Preservation

**Goal**: False positives eliminated via targeted deny list additions and config fixes
**Depends on**: Phase 10 (test data processed)
**Plans**: 4 plans

Plans:
- [x] 11-01: Duration patterns and matching behavior fix
- [x] 11-02: Flow terms and PERSON deny list expansion
- [x] 11-03: Unit name preservation in ROOM redaction
- [x] 11-04: False positive verification and regression tests

**Details:**
- Added 70+ duration patterns to DATE_TIME deny list (simple, numeric, informal, ranges, clinical)
- Switched LOCATION deny list from exact match to word-boundary regex matching
- Added flow terminology: high, low, high flow, low flow, room air, room temperature
- Created 36 regression tests preventing false positive reintroduction
- Preserved PICU/NICU during ROOM redaction

### Phase 12: Regression Validation and CI Verification

**Goal**: No regressions on real handoffs and green CI with expanded deny lists
**Depends on**: Phase 11 (deny lists expanded)
**Plans**: 1 plan

Plans:
- [x] 12-01: Final validation, CI verification, and v2.1 milestone completion

**Details:**
- Validated no regression from Phase 11 deny list expansion (recall unchanged at 86.4%)
- Confirmed precision improvement: 66.3% -> 69.0% (77 fewer false positives)
- Fixed incorrect test expectation for school name detection
- All CI workflows passing (208 passed, 8 xfailed, 1 xpassed)

---

## Milestone Summary

**Key Decisions:**
- Word-boundary regex for LOCATION deny list (prevents "ER" matching "Jefferson")
- 70+ duration patterns covering clinical timeline phrases
- Standalone "high"/"low" added to deny list (overwhelmingly used for oxygen flow rates)
- Test-driven approach: recording → analysis → fix cycle

**Issues Resolved:**
- 45 documented false positives eliminated (100%)
- Duration phrases no longer flagged as DATE_TIME
- Flow terminology no longer flagged as LOCATION
- PICU/NICU preserved during room redaction

**Technical Debt Deferred:**
- Under-detection: 7-digit phones, detailed ages ("3 weeks 2 days"), street addresses, school names
- Tracked via xfail markers in test suite

**Metrics Improvement:**
| Metric | Before | After | Change |
|--------|--------|-------|--------|
| False Positives | 45 | 0 | -100% |
| Precision | 66.3% | 69.0% | +2.7% |
| Recall | 86.4% | 86.4% | No change |

---

*For current project status, see .planning/ROADMAP.md*

---
*Archived: 2026-01-28 as part of v2.1 milestone completion*
